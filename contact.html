<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - Evolution Archery</title>
    <link rel="stylesheet" href="style/style.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <img src="images/evolutionArcheryLogoColor.png" alt="Evolution Archery Logo">
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="team.html">Team</a></li>
                <li><a href="schedule.html">Schedule</a></li>
                <li><a href="gallery.html">Gallery</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="faq.html">FAQ</a></li>
            </ul>
        </nav>
    </header>

    <section class="contact">
        <div class="content">
            <h1>Contact Us</h1>
                <p>Have questions or want to learn more about Evolution Archery? Reach out to us below!</p>

                    <form id="contactForm" action="https://formspree.io/f/xrbkavwa" method="POST">
                        <label>
                            Your email:
                            <input type="email" name="email" required>
                        </label>
                        <label>
                            Your message:
                            <textarea name="message" required></textarea>
                        </label>

                        <input type="hidden" id="state" name="State">

                        <label>
                            <input type="checkbox" id="consentCheckbox" required>
                            I consent to this site collecting my general location (state) for analytics purposes.
                        </label>

                        <button type="submit">Send</button>
                    </form>

                    <script>
                        document.getElementById("contactForm").addEventListener("submit", function (e) {
                            e.preventDefault(); // stop default submit

                            const consentGiven = document.getElementById("consentCheckbox").checked;
                            if (!consentGiven) {
                            alert("Please accept location tracking to submit the form.");
                            return;
                            }

                            fetch("https://ipapi.co/json/")
                            .then(response => response.json())
                            .then(data => {
                                document.getElementById("state").value = `${data.region}, ${data.country_name}`;
                                this.submit(); // now submit form with state field
                            })
                            .catch(error => {
                                console.error("Geo lookup failed:", error);
                                this.submit(); // fallback: submit without state
                            });
                        });
                    </script>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Evolution Archery | Tennessee Valley Youth Archery Team</p>
    </footer>
</body>
</html>
